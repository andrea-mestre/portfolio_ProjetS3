---
import hourHud from '../assets/svg/hour_hud.svg';
import utcIcon from '../assets/svg/UTC.svg';
---

<div class="relative w-full max-w-[600px] md:max-w-[500px] sm:max-w-[400px] h-auto mx-auto p-6 md:p-4 sm:p-3 opacity-0 animate-[fadeInClock_1s_ease-out_2s_forwards]">
  
  <div class="absolute top-0 left-0 right-0 w-[110%] -translate-x-[5%] z-10">
    <img src={hourHud.src} alt="" class="w-full h-auto block animate-[glowPulse_3s_ease-in-out_infinite]" style="filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));" />
  </div>

  <div class="relative flex items-center justify-center gap-[20px] mt-6 mb-[18px] z-20">
    
    <div class="relative min-w-[260px] flex-shrink-0">
      <div class="absolute left-1/2 -translate-x-1/2 text-[48px] md:text-[36px] sm:text-[28px] font-normal text-[var(--color-darkpurple)] blur-[15px] tracking-[0.05em] pointer-events-none font-variant-numeric-tabular animate-[neonBlurBreath_4s_ease-in-out_infinite] whitespace-nowrap" style="font-family: var(--font-title2);" id="time-blur">15:30:24</div>
      <div class="relative text-[48px] md:text-[36px] sm:text-[28px] font-normal text-[var(--color-darkpurple)] tracking-[0.05em] font-variant-numeric-tabular whitespace-nowrap transition-all duration-300 animate-[neonBreath_4s_ease-in-out_infinite]" id="time-main" style="text-shadow: 0 0 10px var(--color-darkpurple), 0 0 20px var(--color-darkpurple), 0 0 20px var(--color-darkpurple); font-family: var(--font-title2);">15:30:24</div>
    </div>
    
    
    <div class="relative z-30">
      <img src={utcIcon.src} alt="UTC+2" class="w-[180px] md:w-[120px] sm:w-[120px] h-auto block animate-[badgePulse_3s_ease-in-out_infinite]" style="filter: drop-shadow(0 0 8px rgba(255,255,255,0.4));" />
    </div>
  </div>
  
  <!-- Textes de localisation -->
  <div class="absolute bottom-[3px] left-[12px] text-left z-20">
    <div class="text-[12px] sm:text-[10px] font-normal text-white tracking-[0.15em] mb-[2px]" style="font-family: var(--font-title2);">LOCATION :</div>
    <div class="text-[12px] sm:text-[10px] font-normal text-white tracking-[0.15em]" style="font-family: var(--font-title2);">POSITION IN FRANCE</div>
  </div>
  
  <!-- Icône clock en bas à droite -->
  <div class="absolute bottom-[3px] right-[12px] z-30">
    <svg class="w-[40px] h-[40px] md:w-[32px] md:h-[32px] sm:w-6 sm:h-6 block brightness-0 invert" style="filter: brightness(0) invert(1) drop-shadow(0 0 5px rgba(255,255,255,0.5));" width="40" height="40" viewBox="0 0 41 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Coins statiques -->
      <path d="M31.5507 1H40V9.36" stroke="white" stroke-width="2" stroke-miterlimit="10"/>
      <path d="M1 9.36V1H9.4493" stroke="white" stroke-width="2" stroke-miterlimit="10"/>
      <path d="M9.4493 39H1V30.64" stroke="white" stroke-width="2" stroke-miterlimit="10"/>
      <path d="M40 30.64V39H31.5507" stroke="white" stroke-width="2" stroke-miterlimit="10"/>
      
      <!-- Groupe rotatif (lignes centrales) -->
      <g class="animate-[iconRotate_20s_linear_infinite] origin-center">
        <path d="M17.8669 21.8604L23.8669 21.8604L23.8669 15.8604L17.8669 15.8604L17.8669 21.8604Z" fill="white"/>
        <path d="M31.6451 29.6386L10.3679 8.3614" stroke="white" stroke-width="1.15" stroke-miterlimit="10"/>
      </g>
    </svg>
  </div>
</div>

<script>
  function updateClock() {
    const now = new Date();
    
    // Heure locale
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');
    
    const timeString = `${hours}:${minutes}:${seconds}`;
    
    // Mettre à jour l'affichage
    const timeMain = document.getElementById('time-main');
    const timeBlur = document.getElementById('time-blur');
    
    if (timeMain) timeMain.textContent = timeString;
    if (timeBlur) timeBlur.textContent = timeString;
  }
  
  // Mettre à jour immédiatement
  updateClock();
  
  // Mettre à jour toutes les secondes
  setInterval(updateClock, 1000);
</script>

<style>
  /* Animations qui ne peuvent pas être remplacées par Tailwind */
  @keyframes fadeInClock {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes glowPulse {
    0%, 100% {
      filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));
    }
    50% {
      filter: drop-shadow(0 0 10px rgba(184,187,240,0.6));
    }
  }

  @keyframes neonBlurBreath {
    0%, 100% {
      filter: blur(15px);
      opacity: 0.7;
      text-shadow: 0 0 35px var(--color-darkpurple);
    }
    50% {
      filter: blur(22px);
      opacity: 1;
      text-shadow: 0 0 50px var(--color-darkpurple), 0 0 70px var(--color-purple);
    }
  }

  @keyframes neonBreath {
    0%,
    100% {
      text-shadow:
        0 0 10px var(--color-darkpurple),
        0 0 20px var(--color-darkpurple),
        0 0 30px var(--color-darkpurple);
    }
    50% {
      text-shadow:
        0 0 15px var(--color-darkpurple),
        0 0 25px var(--color-darkpurple),
        0 0 35px var(--color-darkpurple),
        0 0 40px var(--color-purple);
    }
  }

  @keyframes badgePulse {
    0%, 100% {
      filter: drop-shadow(0 0 8px rgba(255,255,255,0.4));
    }
    50% {
      filter: drop-shadow(0 0 12px rgba(184,187,240,0.7));
    }
  }

  @keyframes iconRotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
</style>
